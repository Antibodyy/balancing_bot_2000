# MPC Configuration Parameters
# Single source of truth per style_guide.md section 4.4


# Horizon parameters
prediction_horizon_steps: 20
sampling_period_s: 0.02  # 50 Hz control loop


# Cost function weights (diagonal elements)
# State: [x, theta, psi, dx, dtheta, dpsi]
state_cost_diagonal:
  - 1.0      # x position
  - 100.0    # theta (pitch) - highest priority for balance
  - 10.0     # psi (yaw/heading)
  - 1.0      # dx (forward velocity)
  - 10.0     # dtheta (pitch rate)
  - 1.0      # dpsi (yaw rate)


# Control: [tau_L, tau_R]
control_cost_diagonal:
  - 0.1      # left wheel torque
  - 0.1      # right wheel torque


# Terminal cost computation
use_terminal_cost_dare: false


# State constraints
pitch_limit_rad: 0.524              # 30 degrees, operational limit
pitch_rate_limit_radps: 5.0         # approximately 286 deg/s
position_limit_m: 5.0               # workspace boundary (x and y)
yaw_limit_rad: 3.1416               # ±π radians (unrestricted rotation)
yaw_rate_limit_radps: 5.0           # conservative yaw rate estimate


# Terminal state constraints (at step N) - applied in addition to state constraints
# These values should match the computed control-invariant set from terminal_set.yaml
# See scripts/compute_terminal_set.py to compute/recompute
# Set to null to disable terminal constraints
terminal_pitch_limit_rad: null      # Recommended: copy from terminal_set.yaml
terminal_pitch_rate_limit_radps: null  # Recommended: copy from terminal_set.yaml
terminal_velocity_limit_mps: null  # Recommended: copy from terminal_set.yaml


# Control constraints
control_limit_nm: 0.25              # Motor stall torque limit
voltage_limit_v: 6.0                # Motor voltage limit (hardware max)


# Solver settings
solver_name: 'osqp'
warm_start_enabled: true
